version: '3'
services:
  #APP
  app:
    build:
      context: .
      dockerfile: ./docker/node/Dockerfile
    ports:
      - ${APP_PORT}:3000
    working_dir: /var/www/html
    volumes: 
      - .:/var/www/html:rw
    environment:
      NODE_ENV: development
    depends_on:
      - database
    links:
      - database
    networks:
      - app-network
  #DATABASE
  database:
    image: tutum/mongodb
    ports:
      - ${MONGODB_PORT}:27017
    environment:
      AUTH: 'no'
    networks:
      - app-network
    volumes: 
      - ./data/db:/data/db
networks:
  app-network:
    driver: bridge